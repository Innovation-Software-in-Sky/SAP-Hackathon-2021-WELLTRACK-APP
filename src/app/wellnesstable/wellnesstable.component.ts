import { Component, OnInit ,ViewChild, AfterViewInit} from '@angular/core';
import { MatTableDataSource } from '@angular/material/table';
import {MonitorService} from'../monitor.service'
import { MatSort } from '@angular/material/sort';

export interface employee{
  date: string;
  id: string;
  name: string;
  score: number;
} 

@Component({
  selector: 'app-wellnesstable',
  templateUrl: './wellnesstable.component.html',
  styleUrls: ['./wellnesstable.component.scss']
})
export class WellnesstableComponent implements OnInit 
{

  public displayedColumns = ['date', 'id', 'name', 'score'];
  public dataSource = new MatTableDataSource<employee>(); 
  public data :Array<employee> = [{"date":"01/01/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"01/01/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"02/01/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"02/01/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"03/01/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"03/01/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"04/01/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"04/01/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"05/01/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"05/01/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"06/01/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"06/01/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"07/01/2021","id":"EMP001","name":"Ghanshyam","score":39.08840864440079},{"date":"07/01/2021","id":"EMP002","name":"Akashat","score":60.92927308447937},{"date":"08/01/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"08/01/2021","id":"EMP002","name":"Akashat","score":61.92927308447937},{"date":"09/01/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"09/01/2021","id":"EMP002","name":"Akashat","score":69.92927308447938},{"date":"10/01/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"10/01/2021","id":"EMP002","name":"Akashat","score":62.92927308447937},{"date":"11/01/2021","id":"EMP001","name":"Ghanshyam","score":58.08840864440079},{"date":"11/01/2021","id":"EMP002","name":"Akashat","score":64.92927308447938},{"date":"12/01/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"12/01/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"13/01/2021","id":"EMP001","name":"Ghanshyam","score":48.08840864440079},{"date":"13/01/2021","id":"EMP002","name":"Akashat","score":54.92927308447937},{"date":"14/01/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"14/01/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"15/01/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"15/01/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"16/01/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"16/01/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"17/01/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"17/01/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"18/01/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"18/01/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"19/01/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"19/01/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"20/01/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"20/01/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"21/01/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"21/01/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"22/01/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"22/01/2021","id":"EMP002","name":"Akashat","score":57.92927308447937},{"date":"23/01/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"23/01/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"24/01/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"24/01/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"25/01/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"25/01/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"26/01/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"26/01/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"27/01/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"27/01/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"28/01/2021","id":"EMP001","name":"Ghanshyam","score":43.08840864440079},{"date":"28/01/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"29/01/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"29/01/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"30/01/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"30/01/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"31/01/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"31/01/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"01/02/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"01/02/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"02/02/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"02/02/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"03/02/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"03/02/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"04/02/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"04/02/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"05/02/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"05/02/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"06/02/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"06/02/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"07/02/2021","id":"EMP001","name":"Ghanshyam","score":39.08840864440079},{"date":"07/02/2021","id":"EMP002","name":"Akashat","score":60.92927308447937},{"date":"08/02/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"08/02/2021","id":"EMP002","name":"Akashat","score":61.92927308447937},{"date":"09/02/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"09/02/2021","id":"EMP002","name":"Akashat","score":69.92927308447938},{"date":"10/02/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"10/02/2021","id":"EMP002","name":"Akashat","score":62.92927308447937},{"date":"11/02/2021","id":"EMP001","name":"Ghanshyam","score":58.08840864440079},{"date":"11/02/2021","id":"EMP002","name":"Akashat","score":64.92927308447938},{"date":"12/02/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"12/02/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"13/02/2021","id":"EMP001","name":"Ghanshyam","score":48.08840864440079},{"date":"13/02/2021","id":"EMP002","name":"Akashat","score":54.92927308447937},{"date":"14/02/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"14/02/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"15/02/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"15/02/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"16/02/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"16/02/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"17/02/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"17/02/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"18/02/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"18/02/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"19/02/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"19/02/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"20/02/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"20/02/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"21/02/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"21/02/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"22/02/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"22/02/2021","id":"EMP002","name":"Akashat","score":57.92927308447937},{"date":"23/02/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"23/02/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"24/02/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"24/02/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"25/02/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"25/02/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"26/02/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"26/02/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"27/02/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"27/02/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"28/02/2021","id":"EMP001","name":"Ghanshyam","score":43.08840864440079},{"date":"28/02/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"01/03/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"01/03/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"02/03/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"02/03/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"03/03/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"03/03/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"04/03/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"04/03/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"05/03/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"05/03/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"06/03/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"06/03/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"07/03/2021","id":"EMP001","name":"Ghanshyam","score":39.08840864440079},{"date":"07/03/2021","id":"EMP002","name":"Akashat","score":60.92927308447937},{"date":"08/03/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"08/03/2021","id":"EMP002","name":"Akashat","score":61.92927308447937},{"date":"09/03/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"09/03/2021","id":"EMP002","name":"Akashat","score":69.92927308447938},{"date":"10/03/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"10/03/2021","id":"EMP002","name":"Akashat","score":62.92927308447937},{"date":"11/03/2021","id":"EMP001","name":"Ghanshyam","score":58.08840864440079},{"date":"11/03/2021","id":"EMP002","name":"Akashat","score":64.92927308447938},{"date":"12/03/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"12/03/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"13/03/2021","id":"EMP001","name":"Ghanshyam","score":48.08840864440079},{"date":"13/03/2021","id":"EMP002","name":"Akashat","score":54.92927308447937},{"date":"14/03/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"14/03/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"15/03/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"15/03/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"16/03/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"16/03/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"17/03/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"17/03/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"18/03/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"18/03/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"19/03/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"19/03/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"20/03/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"20/03/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"21/03/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"21/03/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"22/03/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"22/03/2021","id":"EMP002","name":"Akashat","score":57.92927308447937},{"date":"23/03/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"23/03/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"24/03/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"24/03/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"25/03/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"25/03/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"26/03/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"26/03/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"27/03/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"27/03/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"28/03/2021","id":"EMP001","name":"Ghanshyam","score":43.08840864440079},{"date":"28/03/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"29/03/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"29/03/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"30/03/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"30/03/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"31/03/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"31/03/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"01/04/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"01/04/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"02/04/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"02/04/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"03/04/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"03/04/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"04/04/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"04/04/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"05/04/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"05/04/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"06/04/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"06/04/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"07/04/2021","id":"EMP001","name":"Ghanshyam","score":39.08840864440079},{"date":"07/04/2021","id":"EMP002","name":"Akashat","score":60.92927308447937},{"date":"08/04/2021","id":"EMP001","name":"Ghanshyam","score":45.08840864440079},{"date":"08/04/2021","id":"EMP002","name":"Akashat","score":61.92927308447937},{"date":"09/04/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"09/04/2021","id":"EMP002","name":"Akashat","score":69.92927308447938},{"date":"10/04/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"10/04/2021","id":"EMP002","name":"Akashat","score":62.92927308447937},{"date":"11/04/2021","id":"EMP001","name":"Ghanshyam","score":58.08840864440079},{"date":"11/04/2021","id":"EMP002","name":"Akashat","score":64.92927308447938},{"date":"12/04/2021","id":"EMP001","name":"Ghanshyam","score":52.08840864440079},{"date":"12/04/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"13/04/2021","id":"EMP001","name":"Ghanshyam","score":48.08840864440079},{"date":"13/04/2021","id":"EMP002","name":"Akashat","score":54.92927308447937},{"date":"14/04/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"14/04/2021","id":"EMP002","name":"Akashat","score":53.92927308447937},{"date":"15/04/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"15/04/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"16/04/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"16/04/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"17/04/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"17/04/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"18/04/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"18/04/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"19/04/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"19/04/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"20/04/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"20/04/2021","id":"EMP002","name":"Akashat","score":50.92927308447937},{"date":"21/04/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"21/04/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"22/04/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"22/04/2021","id":"EMP002","name":"Akashat","score":57.92927308447937},{"date":"23/04/2021","id":"EMP001","name":"Ghanshyam","score":46.08840864440079},{"date":"23/04/2021","id":"EMP002","name":"Akashat","score":51.92927308447937},{"date":"24/04/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"24/04/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"25/04/2021","id":"EMP001","name":"Ghanshyam","score":49.08840864440079},{"date":"25/04/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"26/04/2021","id":"EMP001","name":"Ghanshyam","score":41.08840864440079},{"date":"26/04/2021","id":"EMP002","name":"Akashat","score":56.92927308447937},{"date":"27/04/2021","id":"EMP001","name":"Ghanshyam","score":42.08840864440079},{"date":"27/04/2021","id":"EMP002","name":"Akashat","score":52.92927308447937},{"date":"28/04/2021","id":"EMP001","name":"Ghanshyam","score":43.08840864440079},{"date":"28/04/2021","id":"EMP002","name":"Akashat","score":59.92927308447937},{"date":"29/04/2021","id":"EMP001","name":"Ghanshyam","score":44.08840864440079},{"date":"29/04/2021","id":"EMP002","name":"Akashat","score":55.92927308447937},{"date":"30/04/2021","id":"EMP001","name":"Ghanshyam","score":40.08840864440079},{"date":"30/04/2021","id":"EMP002","name":"Akashat","score":56.92927308447937}]

  @ViewChild(MatSort)sort!: MatSort;
  
  constructor(private monitorservice:MonitorService) { }
  

  ngOnInit(): void 
  {
    this.getAllemployees();
  }

  public getAllemployees = () => {
    this.monitorservice.tableapi('').subscribe(res => 
    {
      for(let i=0;i<res.length;i++)
      {
        var date = res[i].formData.date;
        var id = res[i].formData.empid;
        var name = res[i].formData.name;
        var score = res[i].WellbeingScore;
        var d = 
        {
          "date": date,
          "id":id,
          "name":name,
          "score":score
        }
        this.data.push(d);
      }
      this.dataSource.data = this.data as employee[];
      console.log(this.dataSource);
      console.log(res);
      console.log(res.length);
    })
  }

  ngAfterViewInit(): void {
    this.dataSource.sort = this.sort;
  }

  out()
  {
    var output:any =
    {
      "Data":this.dataSource.data,
    }
    this.monitorservice.timeseries(output).subscribe((res: any)=>
    {
      console.log("time"+res);
      alert("sent");
    })
  }
}

